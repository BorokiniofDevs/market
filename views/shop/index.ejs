<!DOCTYPE html>
<html lang="en">
  <%- include("../includes/head.ejs") %>
  <body>
    <%- include("../includes/navigation.ejs") %>

    <!-- Slim Hero -->
    <main class="hero small-hero">
      <div class="hero-text">
        <h1>Welcome to Market</h1>
        <p>Your one-stop shop for everything you love.</p>
        <a href="/shop" class="btn">Shop Now</a>
      </div>
    </main>

    <!-- Product Grid -->
    <section class="product-section">
      <h2 class="section-title">Our Products</h2>

      <% if (products && products.length > 0) { %>
      <div class="product-grid">
        <% products.forEach((product) => { %>
        <article class="product-card">
          <a href="/product-detail/<%= product.id %>" class="product-thumb">
            <img
              src="<%= product.imageUrl %>"
              alt="<%= product.title %>"
              class="product-img"
            />
          </a>

          <div class="product-info">
            <h4 class="product-title"><%= product.title %></h4>
            <p class="price">$<%= product.price %></p>
            <p class="desc"><%= product.description %></p>

            <div class="actions">
              <a
                href="/shop/product-detail/<%= product.id %>"
                class="btn btn-secondary"
              >
                Details
              </a>

              <form action="/shop/cart" method="POST" class="inline-form">
                <input
                  type="hidden"
                  name="productId"
                  value="<%= product.id %>"
                />
                <button type="submit" class="btn">Add to Cart</button>
              </form>
            </div>
          </div>
        </article>
        <% }) %>
      </div>
      <% } else { %>
      <h3 class="no-products">No products in shop</h3>
      <% } %>
    </section>

    <!-- Features (keep as-is) -->
    <section class="features">
      <div class="feature">
        <h2>Fast Delivery</h2>
        <p>Get your products delivered in no time.</p>
      </div>
      <div class="feature">
        <h2>Quality Products</h2>
        <p>We source only the best for our customers.</p>
      </div>
      <div class="feature">
        <h2>Secure Checkout</h2>
        <p>Your payments are safe with us.</p>
      </div>
    </section>

    <%- include("../includes/footer.ejs") %>
  </body>
</html>
